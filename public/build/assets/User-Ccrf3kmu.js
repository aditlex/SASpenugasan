import{r,m as U,j as e,L as X,S as j}from"./app-CCx1_5AL.js";import{B as l}from"./createLucideIcon-97oO_UI0.js";import{D as $,a as G,b as J,c as K,d as Q,T as W}from"./textarea-CpYgA8qf.js";import{L as c,I as f}from"./label-BOpjg2w3.js";import{S as w,a as _,b as T,c as D,d as x,e as Y,C as Z,f as ee}from"./select-B6xP5_bc.js";import{A as se,C as te}from"./app-layout-w90uDOo5.js";import{C as ae,a as re}from"./circle-x-C22NvTi_.js";import{L as ie,C as le}from"./list-C6saqr3O.js";import{P as de,T as ce}from"./trash-2-BEL3486h.js";import"./index-D0LANlit.js";import"./index-DwheMYVf.js";import"./index-Bu7UcQ8E.js";const ne=[{title:"Show Tasks",href:"/tasks"}];function Se({tasks:t,lists:L,filters:N,flash:a}){const[k,n]=r.useState(!1),[o,v]=r.useState(null),[u,h]=r.useState(!1),[F,b]=r.useState(""),[S,y]=r.useState("success"),[m,z]=r.useState(N.search),[p,A]=r.useState(N.filter);r.useEffect(()=>{a!=null&&a.success?(b(a.success),y("success"),h(!0)):a!=null&&a.error&&(b(a.error),y("error"),h(!0))},[a]),r.useEffect(()=>{if(u){const s=setTimeout(()=>{h(!1)},3e3);return()=>clearTimeout(s)}},[u]);const{data:d,setData:i,post:E,put:I,processing:P,reset:C,delete:B}=U({title:"",description:"",due_date:"",list_id:"",is_completed:!1}),M=s=>{s.preventDefault(),o?I(route("tasks.update",o.id),{onSuccess:()=>{n(!1),C(),v(null)}}):E(route("tasks.store"),{onSuccess:()=>{n(!1),C()}})},O=s=>{v(s),i({title:s.title,description:s.description||"",due_date:s.due_date||"",list_id:s.list_id.toString(),is_completed:s.is_completed}),n(!0)},V=s=>{B(route("tasks.destroy",s))},R=s=>{s.preventDefault(),j.get(route("tasks.index"),{search:m,filter:p},{preserveState:!0,preserveScroll:!0})},q=s=>{A(s),j.get(route("tasks.index"),{search:m,filter:s},{preserveState:!0,preserveScroll:!0})},g=s=>{j.get(route("tasks.index"),{page:s,search:m,filter:p},{preserveState:!0,preserveScroll:!0})};return e.jsxs(se,{breadcrumbs:ne,children:[e.jsx(X,{title:"Show Taks"}),e.jsxs("div",{className:"from-background to-muted/20 flex h-full flex-1 flex-col gap-6 rounded-xl bg-gradient-to-br p-6",children:[u&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-2 rounded-lg p-4 shadow-lg ${S==="success"?"bg-green-500":"bg-red-500"} animate-in fade-in slide-in-from-top-5 text-white`,children:[S==="success"?e.jsx(ae,{className:"h-5 w-5"}):e.jsx(re,{className:"h-5 w-5"}),e.jsx("span",{children:F})," "]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"All Tasks"})," ",e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your tasks and stay organized"})," "]})," ",e.jsxs($,{open:k,onOpenChange:n,children:[e.jsx(G,{})," ",e.jsxs(J,{className:"sm:max-w-[425px]",children:[e.jsxs(K,{children:[e.jsx(Q,{className:"text-xl",children:o?"Edit Task":"Create New Task"})," "]})," ",e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"title",children:"Title"})," ",e.jsx(f,{id:"title",value:d.title,onChange:s=>i("title",s.target.value),required:!0,className:"focus:ring-primary focus:ring-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"})," ",e.jsx(W,{id:"description",value:d.description,onChange:s=>i("description",s.target.value),className:"focus:ring-primary focus:ring-2"})]})," ",e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"list_id",children:"List"})," ",e.jsxs(w,{value:d.list_id,onValueChange:s=>i("list_id",s),children:[e.jsx(_,{className:"focus:ring-primary focus:ring-2",children:e.jsx(T,{placeholder:"Select a list"})})," ",e.jsx(D,{children:L.map(s=>e.jsx(x,{value:s.id.toString(),children:s.title},s.id))})," "]})," "]})," ",e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"due_date",children:"Due Date"})," ",e.jsx(f,{id:"due_date",type:"date",value:d.due_date,onChange:s=>i("due_date",s.target.value),className:"focus:ring-primary focus:ring-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_completed",checked:d.is_completed,onChange:s=>i("is_completed",s.target.checked),className:"focus:ring-primary h-4 w-4 rounded border-gray-300 focus:ring-2"}),e.jsx(c,{htmlFor:"is_completed",children:"Completed"})," "]})," ",e.jsx(l,{type:"submit",disabled:P,className:"bg-primary hover:bg-primary/90 w-full shadow-lg",children:o?"Update":"Create"})]})]})," "]})," "]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("form",{onSubmit:R,className:"relative flex-1",children:[e.jsx(Y,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),e.jsx(f,{placeholder:"Search tasks...",value:m,onChange:s=>z(s.target.value),className:"pl-10"})]})," ",e.jsxs(w,{value:p,onValueChange:q,children:[e.jsx(_,{className:"w-[180px]",children:e.jsx(T,{placeholder:"Filter by status"})})," ",e.jsxs(D,{children:[e.jsx(x,{value:"all",children:"All Tasks"})," ",e.jsx(x,{value:"completed",children:"Completed"})," ",e.jsx(x,{value:"pending",children:"Pending"})," "]})," "]})," "]}),e.jsxs("div",{className:"rounded-md border",children:[e.jsxs("div",{className:"relative w-full overflow-auto",children:[e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsxs("thead",{className:"[&_tr]:border-b",children:[e.jsxs("tr",{className:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",children:[e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Title"}),e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Description"}),e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"List"}),e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Due Date"})," ",e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Status"})," ",e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-right align-middle font-medium",children:"Actions"})," "]})," "]})," ",e.jsxs("tbody",{className:"[&_tr:last-child]:border-0",children:[t.data.map(s=>e.jsxs("tr",{className:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",children:[e.jsx("td",{className:"p-4 align-middle font-medium",children:s.title}),e.jsx("td",{className:"max-w-[450px] break-words p-4 align-middle",children:s.description||"No description"}),e.jsx("td",{className:"p-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-muted-foreground h-4 w-4"}),s.list.title]})}),e.jsx("td",{className:"p-4 align-middle",children:s.due_date?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"text-muted-foreground h-4 w-4"}),new Date(s.due_date).toLocaleDateString()]}):e.jsx("span",{className:"text-muted-foreground",children:"No due date"})}),e.jsx("td",{className:"p-4 align-middle",children:s.is_completed?e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Completed"})," "]}):e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500",children:[e.jsx("span",{children:"Pending"})," "]})}),e.jsx("td",{className:"p-4 text-right align-middle",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>O(s),className:"hover:bg-primary/10 hover:text-primary",children:e.jsx(de,{className:"h-4 w-4"})})," ",e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>{confirm("Are you sure you want to delete this task?")&&V(s.id)},className:"hover:bg-destructive/10 hover:text-destructive",children:e.jsx(ce,{className:"h-4 w-4"})})]})})]},s.id)),t.data.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-muted-foreground p-4 text-center",children:["No tasks foreground"," "]})})]})," "]})," "]})," "]}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"text-muted-foreground text-sm",children:["Showing ",t.from," to ",t.to," of ",t.total," results"]})," ",e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"outline",size:"icon",onClick:()=>g(t.current_page-1),disabled:t.current_page===1,children:e.jsx(ee,{className:"h-4 w-4"})})," ",e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:t.last_page},(s,H)=>H+1).map(s=>e.jsx(l,{variant:s===t.current_page?"default":"outline",size:"icon",onClick:()=>g(s),children:s},s))})," ",e.jsx(l,{variant:"outline",size:"icon",onClick:()=>g(t.current_page+1),disabled:t.current_page===t.last_page,children:e.jsx(te,{className:"h-4 w-4"})})," "]})," "]})," "]})," "]})}export{Se as default};
