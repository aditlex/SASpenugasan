import{r,m as R,j as e,L as q,S as j}from"./app-CCx1_5AL.js";import{B as d}from"./createLucideIcon-97oO_UI0.js";import{D as H,a as U,b as X,c as $,d as G,T as J}from"./textarea-CpYgA8qf.js";import{L as c,I as f}from"./label-BOpjg2w3.js";import{S as w,a as y,b as T,c as _,d as m,e as K,C as Q,f as W}from"./select-B6xP5_bc.js";import{A as Y,C as Z}from"./app-layout-w90uDOo5.js";import{C as ee,a as se}from"./circle-x-C22NvTi_.js";import{P as te}from"./plus--nzMJp20.js";import{L as ae,C as re}from"./list-C6saqr3O.js";import"./index-D0LANlit.js";import"./index-DwheMYVf.js";import"./index-Bu7UcQ8E.js";const le=[{title:"Tasks",href:"/tasks"}];function fe({tasks:t,lists:D,filters:N,flash:a}){const[k,x]=r.useState(!1),[n,L]=r.useState(null),[u,h]=r.useState(!1),[F,v]=r.useState(""),[b,S]=r.useState("success"),[o,E]=r.useState(N.search),[p,z]=r.useState(N.filter);r.useEffect(()=>{a!=null&&a.success?(v(a.success),S("success"),h(!0)):a!=null&&a.error&&(v(a.error),S("error"),h(!0))},[a]),r.useEffect(()=>{if(u){const s=setTimeout(()=>{h(!1)},3e3);return()=>clearTimeout(s)}},[u]);const{data:l,setData:i,post:I,put:P,processing:A,reset:C}=R({title:"",description:"",due_date:"",list_id:"",is_completed:!1}),B=s=>{s.preventDefault(),n?P(route("tasks.update",n.id),{onSuccess:()=>{x(!1),C(),L(null)}}):I(route("tasks.store"),{onSuccess:()=>{x(!1),C()}})},M=s=>{s.preventDefault(),j.get(route("tasks.index"),{search:o,filter:p},{preserveState:!0,preserveScroll:!0})},O=s=>{z(s),j.get(route("tasks.index"),{search:o,filter:s},{preserveState:!0,preserveScroll:!0})},g=s=>{j.get(route("tasks.index"),{page:s,search:o,filter:p},{preserveState:!0,preserveScroll:!0})};return e.jsxs(Y,{breadcrumbs:le,children:[e.jsx(q,{title:"Tasks"}),e.jsxs("div",{className:"from-background to-muted/20 flex h-full flex-1 flex-col gap-6 rounded-xl bg-gradient-to-br p-6",children:[u&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-2 rounded-lg p-4 shadow-lg ${b==="success"?"bg-green-500":"bg-red-500"} animate-in fade-in slide-in-from-top-5 text-white`,children:[b==="success"?e.jsx(ee,{className:"h-5 w-5"}):e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:F})," "]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks"})," ",e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your tasks and stay organized"})," "]})," ",e.jsxs(H,{open:k,onOpenChange:x,children:[e.jsxs(U,{children:[e.jsxs(d,{className:"bg-primary hover:bg-primary/90 shadow-lg",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"New Task"]})," "]})," ",e.jsxs(X,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsx(G,{className:"text-xl",children:n?"Edit Task":"Create New Task"})," "]})," ",e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"title",children:"Title"})," ",e.jsx(f,{id:"title",value:l.title,onChange:s=>i("title",s.target.value),required:!0,className:"focus:ring-primary focus:ring-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"})," ",e.jsx(J,{id:"description",value:l.description,onChange:s=>i("description",s.target.value),className:"focus:ring-primary focus:ring-2"})]})," ",e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"list_id",children:"List"})," ",e.jsxs(w,{value:l.list_id,onValueChange:s=>i("list_id",s),children:[e.jsx(y,{className:"focus:ring-primary focus:ring-2",children:e.jsx(T,{placeholder:"Select a list"})})," ",e.jsx(_,{children:D.map(s=>e.jsx(m,{value:s.id.toString(),children:s.title},s.id))})," "]})," "]})," ",e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"due_date",children:"Due Date"})," ",e.jsx(f,{id:"due_date",type:"date",value:l.due_date,onChange:s=>i("due_date",s.target.value),className:"focus:ring-primary focus:ring-2"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_completed",checked:l.is_completed,onChange:s=>i("is_completed",s.target.checked),className:"focus:ring-primary h-4 w-4 rounded border-gray-300 focus:ring-2"}),e.jsx(c,{htmlFor:"is_completed",children:"Completed"})," "]})," ",e.jsx(d,{type:"submit",disabled:A,className:"bg-primary hover:bg-primary/90 w-full shadow-lg",children:n?"Update":"Create"})]})]})," "]})," "]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("form",{onSubmit:M,className:"relative flex-1",children:[e.jsx(K,{className:"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),e.jsx(f,{placeholder:"Search tasks...",value:o,onChange:s=>E(s.target.value),className:"pl-10"})]})," ",e.jsxs(w,{value:p,onValueChange:O,children:[e.jsx(y,{className:"w-[180px]",children:e.jsx(T,{placeholder:"Filter by status"})})," ",e.jsxs(_,{children:[e.jsx(m,{value:"all",children:"All Tasks"})," ",e.jsx(m,{value:"completed",children:"Completed"})," ",e.jsx(m,{value:"pending",children:"Pending"})," "]})," "]})," "]}),e.jsxs("div",{className:"rounded-md border",children:[e.jsxs("div",{className:"relative w-full overflow-auto",children:[e.jsxs("table",{className:"w-full caption-bottom text-sm",children:[e.jsxs("thead",{className:"[&_tr]:border-b",children:[e.jsxs("tr",{className:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",children:[e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Title"}),e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Description"}),e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"List"}),e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Due Date"})," ",e.jsx("th",{className:"text-muted-foreground h-12 px-4 text-left align-middle font-medium",children:"Status"})," "]})," "]})," ",e.jsxs("tbody",{className:"[&_tr:last-child]:border-0",children:[t.data.map(s=>e.jsxs("tr",{className:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",children:[e.jsx("td",{className:"p-4 align-middle font-medium",children:s.title}),e.jsx("td",{className:"max-w-[450px] break-words p-4 align-middle",children:s.description||"No description"}),e.jsx("td",{className:"p-4 align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"text-muted-foreground h-4 w-4"}),s.list.title]})}),e.jsx("td",{className:"p-4 align-middle",children:s.due_date?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"text-muted-foreground h-4 w-4"}),new Date(s.due_date).toLocaleDateString()]}):e.jsx("span",{className:"text-muted-foreground",children:"No due date"})}),e.jsx("td",{className:"p-4 align-middle",children:s.is_completed?e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Completed"})," "]}):e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500",children:[e.jsx("span",{children:"Pending"})," "]})})]},s.id)),t.data.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-muted-foreground p-4 text-center",children:["No tasks foreground"," "]})})]})," "]})," "]})," "]}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"text-muted-foreground text-sm",children:["Showing ",t.from," to ",t.to," of ",t.total," results"]})," ",e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:()=>g(t.current_page-1),disabled:t.current_page===1,children:e.jsx(W,{className:"h-4 w-4"})})," ",e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:t.last_page},(s,V)=>V+1).map(s=>e.jsx(d,{variant:s===t.current_page?"default":"outline",size:"icon",onClick:()=>g(s),children:s},s))})," ",e.jsx(d,{variant:"outline",size:"icon",onClick:()=>g(t.current_page+1),disabled:t.current_page===t.last_page,children:e.jsx(Z,{className:"h-4 w-4"})})," "]})," "]})," "]})," "]})}export{fe as default};
